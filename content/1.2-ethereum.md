## 以太坊：一种下一代的加密货币和去中心化应用平台
比特币杂志
2014.01.23

在过去的一年中，增加了大量的关于所谓的比特币2.0协议的讨论，一种受比特币启发的可选的关于暗号的网络，但计划让底层的技术能够更有用，而不仅仅局限于货币。最早关于这个想法的实现是Namecodin，一种在2010年创建的类比特币货币，被用于去中心化的域名注册。更最近的时候，我们看到各种各样的币出现，允许用户在比特币网络上创建他们自己拥有的货币，以及更先进的协议，比如Mastercoin，BitShares和Counterparty，这些都打算提供一些特性，比如金融衍生品、存储钱包和去中心化交换。但是，直到这个时间点，所有的已经发明出来的协议都已经侧束花了，尝试去提供细节的特点集合，目标都是导向特定的产业或者应用，通常自然带有金融属性。现在，一群开发者，包括我自己，和一个带着反向踪迹的项目一起出现，是一个想要成为尽可能生成的加密货币网络，允许任何人来创建特殊化的应用，在几乎任何可以想象的目标之上。这个项目就是：以太坊。

加密货币协议就像洋葱

一个在许多加密货币2.0协议中通用的设计哲学是，如果就像互联网一样，协议被分成不同的层，那么加密货币设计会工作得最好。在这种想法的训练下，比特币被认为是一种加密货币生态中的TCP/IP协议，同时其他下一代的协议可以构建于比特币的上面，就像我们设计SMTP用户电子邮件，HTTP用于网页，XMPP用户聊一样，都在通用的基础数据层TCP的上面。

到目前为止，遵循这个模型的主要三种协议是colored coins、Mastercoin和Counterparty。colored coin协议工作的方式非常简单。首先，为了创建colored coins，一个用户给特别的比特币加标签，表明一个特殊的含义，比如，如果Bob是一个黄金发行者，他可能希望标记一些比特币，同时说对于她来说每个satoshi代表0.1克可以交换的黄金。协议接着通过区块链追踪这些比特币，同时用那种方式使得在任何时候计算谁拥有他们成为了可能。

Mastercoin和Counterparty某种程度上更抽象一些。它们使用比特币区块链来存储数据，所以一笔Mastercoin或Counterparty交易就是一笔比特币交易，但是这些协议用一种完全不同的方法来诠释这些交易。一个人可以有两笔Mastercoin交易，一笔发送一个单位的MSC，同时另外一笔发送十万个单位的MSC，但是从一个比特币用户的那个时点的视角来看，是不知道Mastercoin协议是如何工作的，它们都像每次发送0.0006 BTC的小交易一样。Mastercoin特有的元数据是编码进了交易输出中。一个Mastercoin客户端接着需要在比特币网络中搜索Mastercoin的交易，从而决定当前Mastercoin的资产负载表。

我本人很荣幸能直接谈论许多colored coin和mastercoin协议的发起人，同时相当程度参与了同时这两个项目的开发。但是，在超过大约两个月的研究和参与后，我最终意识到的是，基于低层级协议之上构建高层次的协议的根本想法是可赞誉的，当他们今天站起来，在实现上，这里有许多基础的裂纹和缺点，这些可能会阻止项目获得不仅仅是一些吸引力。

原因并不是在这些协议本身背后的想法是不好的，相反的，这些想法是优秀的，同时社区独自的响应也证明了他们正在尝试做的一些事情是非常需要的。而原因是他们尝试在低层协议比特币上构建的高层次协议，这些低层协议简单来说是不适合这个任务的。并不是说比特币是糟糕的，或者说它不是革命性的发明。作为存储和转移价值的协议，比特币是优秀的。但是，正如成为一个有效的低层协议需要关心的，比特币没有那么有效率。它不像TCP一样可以基于此构建HTTP协议，它更像是SMTP：一个擅长处理它目标处理的任务（在SMTP中是邮件，比特币中是金钱），而不是特币擅长作为基础来处理其他一些事情。

比特币明确的失败特别集中在一个地方：扩展性。比特币本身是和加密货币所能达到的扩展性一般的扩展性。即使区块链气球超过TB，仍然有一个叫做在比特币白皮书中描述的“简单支付验证”的协议，可以允许“轻客户端”在几MB的带宽和存储下，也能够安全决定是否他们收到了交易。但在colored coin和Mastercoin中，这种可能性消失了。原因在于，为了决定一个有颜色的币是哪种颜色，你需要不仅仅是使用比特币简单支付验证来证明交易存在，你还需要追踪所有到起源的路径，以及在路径上每一步都做一个SPV检查。有时候，这种反向的扫描是指数级的。同时在元币协议下，没有方式可以知道一些事情，如果不验证每一个交易的话。

同时这就是以太坊尝试去修复的问题。以太坊不会尝试成为一个有上百种特点来满足每一种需求的瑞士军刀式的协议，相反地，以太坊目标是成为更胜一筹的基础协议，同时允许其他去中心化的应用基于它而不是比特币之上构建，同时赋予他们更多工具来允许他们从以太坊的扩展性和有效性中获得完全的收益。

合约，不仅是为了差价
在以太坊正在开发的时候，这里出现了大量的允许金融合同构建在加密货币之上的的利益。基础类型的合约是一种“差价合约CFD”。在一个为不同点设定的合同中，良方统一放置一些数量的金钱，接着以一定的份额获取金钱，而这些份额是依赖一些底层资产的价值。比如，一个CFD可能包含Alice放的1000美元，Bob放的1000美元，接着在三十天以后，区块链会自动返回Alice1000美元，如果在那段时间LTC/TSD价格上涨了，就再每一美元给100美元，而剩下的就给Bob。这些合约允许人们以一个高的杠杆来对资产进行投机，或者可选择性地通过取消他们的暴露来保护他们远离加密货币的波动性，二无需任何中心化地交换。

然而在这个时点，很明确的是，差价合约真的只是许多更多通用概念：公式合约，中的一种特殊的例子。从Alice获取x美元，从Bob获取y美元，然后返回给Alice x美元加上额外的针对每美元上涨的z美元，不应该是这样的合约，而是一种能够基于任何数学公式，允许合约有任意复杂性，返回给Alice一定数量基金的合约。如果公式允许随机数据作为输入，那么这些产生的CFD甚至能够被用来实现一些一对一的博弈。

以太坊采用了这个想法，并且推动再走了一步。与哪些再两个开始和结束的组织之间统一产生的合约不同，以太坊中的合约像一系列的由区块链模拟的自治代理。每个以太坊合约有她自己拥有的内部脚本代码，同时脚本代码会在每次一个交易发送给合约时被激活。脚本语言已经获取了交易的价值、发肿着和可选的数据项，以及一些区块数据和它拥有的内部记忆作为输入，同时也能够发送交易。为了制作一个CFD，Alice会创建一个合约，同时用价值1000美元的加密货币进行播种，同时也接着会等待Bob通过发送一个包含1000美元的交易来接受这个合约。合约接着会被编程来开始一个计时器，同时在三十天以后Alice或者Bob会能够发送一个小的交易到合约来再一次激活它，同时释放基金。

以太坊合约的代码样例如下，是实用高级语言写的：
```
if tx.value < 100 * block.basefee:
TODO
```

除了这个狭窄的为了差价的合约模型，白皮书概述了许多其他交易类型，也就是那些和以太坊脚本一起会成为可能的，一些包括以下的：

* 多签名的第三方托管： 和比特币仲裁服务Bitrated有相似的精神，但是有更复杂的规则。比如，这里不再需要签名者手动地部分传递签名后的交易，人们可以一次在区块链上授权异步撤回，接着一旦有足够的人授权了，那就会让交易自动完成。

* 保存账户：一个有趣的安装工作如下。假设Alice想要存储大量的钱，但是又不想遭受如果他的私钥丢失或者被盗窃而失去一切的风险。她和Bob制定了一个合约，一个值得半信任的银行，拥有如下规则：Alice被允许每天提取至多1个单位，两者认证的话可以提取任意数量，Bob被允许每天提取0.05个单位。正常情况下，Alice在一个时间点仅会需要少量数额，如果Alice想要更多，他可以向Bob验证他的身份，同时完成提取。如果Alice的私钥被盗取了，她可以跑到Bob那里，同时在小偷可以获取超过1个单位的基金份额之前，将基金移到另外一个合约。如果Alice丢失了私钥，那么Bob会最终能够恢复她的基金。如果Bob变邪恶的话，Alice可以以比Bob快20倍的速度提取她拥有的基金。简言之，传统银行托管的安全性，都完全没有信任。

* 点对点博弈：任何类型的点对点博弈协议都能基于以太坊的之上来实现。一个非常基础的协议会简单成为一个差异合约，基于像区块哈希值一类的随机数据。

* 创造你自己的货币：使用以太坊内部内存存储，你可以在以太坊中创建一个完全新的货币。这些新的协议可以被创建成为可以互相交互的，以及拥有一个区中心换的交易中心，或者任何其他种类的新特性。

这是以太坊代码的优势：因为脚本语言是被设计成没有限制的，除了针对收费系统，特别是任何种类的规则都可以被编码进去。某人甚至可以拥有一个完成的公司来在区块上管理储蓄，用一个合约声明。比如，当前公司股份持有人中的六十人是需要同意后，才能移动任何基金（同时或许三十人可以每天移动最大一个单位的基金）。其他的，不那么传统的资本结果也是可能的，一个想法就是对于一个民主的组织，拥有唯一的规则就是，只有在一个组中已经存在的成员，有三分之二同意，才能够邀请另一个成员。

超越金融
金融应用，也仅挠到了以太坊和基于其之上的密码协议的可以做的事情的表面。当以太坊的金融应用或许能够成为最开始激发再加密货币社区中的许多人，对于以太坊能够和其他非金融的点对点协议一起工作的方式上的长期的承诺是有争议的。目前非金融点对点协议的所面对的主要问题之一是：缺乏激励，也就是说，不像中心化的，为了利润的平台那样，这里是没有金融原因才促进参与的。在一些例子中，参与度在一定程度上也是它拥有的奖励和荣誉。也就是这个原因，所以人们才继续写开源软件，给Wikipedia贡献，以及在论坛写评论，写博客文章。但是，在点对点协议的上下文中，在任何有意义的意识中，参与经常不是一个“有趣的”活动。它包含了投入大量资源，让一个守护程序在后台运行（潜在地独占CPU和电能），同时忘了它。

比如，这里已经有一个长时间的数据协议，比如Freenet，一个特别提供给每个人去中心化的不可审查的静态内容托管。但是实际上，Freenet相当慢，同时几乎没有人贡献资源。文件共享协议都遇到了同样的问题：尽管利他主义足够好来传播受欢迎的商业一鸣惊人的事物，它显著成为了不那么有效率的，对于这些不那么主流的偏好。因此，事与愿违地，文件共享的点对点自然特性可能实际上帮助了娱乐和媒体产品的中心化，而不是阻碍。但是，所有的这些问题可以潜在的被解决，如果我们添加了激励——赋能人们去构建不只是非盈利的副项目，同时也能够让商业和其周边的生计参与到网络中。

去中心化的数据存储：