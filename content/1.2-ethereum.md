## 以太坊：一种下一代的加密货币和去中心化应用平台
比特币杂志
2014.01.23

在过去的一年中，增加了大量的关于所谓的比特币2.0协议的讨论，一种受比特币启发的可选的关于暗号的网络，但计划让底层的技术能够更有用，而不仅仅局限于货币。最早关于这个想法的实现是Namecodin，一种在2010年创建的类比特币货币，被用于去中心化的域名注册。更最近的时候，我们看到各种各样的币出现，允许用户在比特币网络上创建他们自己拥有的货币，以及更先进的协议，比如Mastercoin，BitShares和Counterparty，这些都打算提供一些特性，比如金融衍生品、存储钱包和去中心化交换。但是，直到这个时间点，所有的已经发明出来的协议都已经侧束花了，尝试去提供细节的特点集合，目标都是导向特定的产业或者应用，通常自然带有金融属性。现在，一群开发者，包括我自己，和一个带着反向踪迹的项目一起出现，是一个想要成为尽可能生成的加密货币网络，允许任何人来创建特殊化的应用，在几乎任何可以想象的目标之上。这个项目就是：以太坊。

加密货币协议就像洋葱

一个在许多加密货币2.0协议中通用的设计哲学是，如果就像互联网一样，协议被分成不同的层，那么加密货币设计会工作得最好。在这种想法的训练下，比特币被认为是一种加密货币生态中的TCP/IP协议，同时其他下一代的协议可以构建于比特币的上面，就像我们设计SMTP用户电子邮件，HTTP用于网页，XMPP用户聊一样，都在通用的基础数据层TCP的上面。

到目前为止，遵循这个模型的主要三种协议是colored coins、Mastercoin和Counterparty。colored coin协议工作的方式非常简单。首先，为了创建colored coins，一个用户给特别的比特币加标签，表明一个特殊的含义，比如，如果Bob是一个黄金发行者，他可能希望标记一些比特币，同时说对于她来说每个satoshi代表0.1克可以交换的黄金。协议接着通过区块链追踪这些比特币，同时用那种方式使得在任何时候计算谁拥有他们成为了可能。

Mastercoin和Counterparty某种程度上更抽象一些。它们使用比特币区块链来存储数据，所以一笔Mastercoin或Counterparty交易就是一笔比特币交易，但是这些协议用一种完全不同的方法来诠释这些交易。一个人可以有两笔Mastercoin交易，一笔发送一个单位的MSC，同时另外一笔发送十万个单位的MSC，但是从一个比特币用户的那个时点的视角来看，是不知道Mastercoin协议是如何工作的，它们都像每次发送0.0006 BTC的小交易一样。Mastercoin特有的元数据是编码进了交易输出中。一个Mastercoin客户端接着需要在比特币网络中搜索Mastercoin的交易，从而决定当前Mastercoin的资产负载表。

我本人很荣幸能直接谈论许多colored coin和mastercoin协议的发起人，同时相当程度参与了同时这两个项目的开发。但是，在超过大约两个月的研究和参与后，我最终意识到的是，基于低层级协议之上构建高层次的协议的根本想法是可赞誉的，当他们今天站起来，在实现上，这里有许多基础的裂纹和缺点，这些可能会阻止项目获得不仅仅是一些吸引力。

原因并不是在这些协议本身背后的想法是不好的，相反的，这些想法是优秀的，同时社区独自的响应也证明了他们正在尝试做的一些事情是非常需要的。而原因是他们尝试在低层协议比特币上构建的高层次协议，这些低层协议简单来说是不适合这个任务的。并不是说比特币是糟糕的，或者说它不是革命性的发明。作为存储和转移价值的协议，比特币是优秀的。但是，正如成为一个有效的低层协议需要关心的，比特币没有那么有效率。它不像TCP一样可以基于此构建HTTP协议，它更像是SMTP：一个擅长处理它目标处理的任务（在SMTP中是邮件，比特币中是金钱），而不是特币擅长作为基础来处理其他一些事情。

比特币明确的失败特别集中在一个地方：扩展性。比特币本身是和加密货币所能达到的扩展性一般的扩展性。即使区块链气球超过TB，仍然有一个叫做在比特币白皮书中描述的“简单支付验证”的协议，可以允许“轻客户端”在几MB的带宽和存储下，也能够安全决定是否他们收到了交易。但在colored coin和Mastercoin中，这种可能性消失了。原因在于，为了决定一个有颜色的币是哪种颜色，你需要不仅仅是使用比特币简单支付验证来证明交易存在，你还需要追踪所有到起源的路径，以及在路径上每一步都做一个SPV检查。有时候，这种反向的扫描是指数级的。同时在元币协议下，没有方式可以知道一些事情，如果不验证每一个交易的话。

同时这就是以太坊尝试去修复的问题。以太坊不会尝试成为一个有上百种特点来满足每一种需求的瑞士军刀式的协议，相反地，以太坊目标是成为更胜一筹的基础协议，同时允许其他去中心化的应用基于它而不是比特币之上构建，同时赋予他们更多工具来允许他们从以太坊的扩展性和有效性中获得完全的收益。

合约，不仅是为了差价
在以太坊正在开发的时候，这里出现了大量的允许金融合同构建在加密货币之上的的利益。基础类型的合约是一种“差价合约CFD”。在一个为不同点设定的合同中，良方统一放置一些数量的金钱，接着以一定的份额获取金钱，而这些份额是依赖一些底层资产的价值。比如，一个CFD可能包含Alice放的1000美元，Bob放的1000美元，接着在三十天以后，区块链会自动返回Alice1000美元，如果在那段时间LTC/TSD价格上涨了，就再每一美元给100美元，而剩下的就给Bob。这些合约允许人们以一个高的杠杆来对资产进行投机，或者可选择性地通过取消他们的暴露来保护他们远离加密货币的波动性，二无需任何中心化地交换。

然而在这个时点，很明确的是，差价合约真的只是许多更多通用概念：公式合约，中的一种特殊的例子。从Alice获取x美元，从Bob获取y美元，然后返回给Alice x美元加上额外的针对每美元上涨的z美元，不应该是这样的合约，而是一种能够基于任何数学公式，允许合约有任意复杂性，返回给Alice一定数量基金的合约。如果公式允许随机数据作为输入，那么这些产生的CFD甚至能够被用来实现一些一对一的博弈。

以太坊采用了这个想法，并且推动再走了一步。与哪些再两个开始和结束的组织之间统一产生的合约不同，以太坊中的合约像一系列的由区块链模拟的自治代理。每个以太坊合约有她自己拥有的内部脚本代码，同时脚本代码会在每次一个交易发送给合约时被激活。脚本语言已经获取了交易的价值、发肿着和可选的数据项，以及一些区块数据和它拥有的内部记忆作为输入，同时也能够发送交易。为了制作一个CFD，Alice会创建一个合约，同时用价值1000美元的加密货币进行播种，同时也接着会等待Bob通过发送一个包含1000美元的交易来接受这个合约。合约接着会被编程来开始一个计时器，同时在三十天以后Alice或者Bob会能够发送一个小的交易到合约来再一次激活它，同时释放基金。

以太坊合约的代码样例如下，是实用高级语言写的：
```
if tx.value < 100 * block.basefee:
TODO
```

除了这个狭窄的为了差价的合约模型，白皮书概述了许多其他交易类型，也就是那些和以太坊脚本一起会成为可能的，一些包括以下的：

* 多签名的第三方托管： 和比特币仲裁服务Bitrated有相似的精神，但是有更复杂的规则。比如，这里不再需要签名者手动地部分传递签名后的交易，人们可以一次在区块链上授权异步撤回，接着一旦有足够的人授权了，那就会让交易自动完成。

* 保存账户：一个有趣的安装工作如下。假设Alice想要存储大量的钱，但是又不想遭受如果他的私钥丢失或者被盗窃而失去一切的风险。她和Bob制定了一个合约，一个值得半信任的银行，拥有如下规则：Alice被允许每天提取至多1个单位，两者认证的话可以提取任意数量，Bob被允许每天提取0.05个单位。正常情况下，Alice在一个时间点仅会需要少量数额，如果Alice想要更多，他可以向Bob验证他的身份，同时完成提取。如果Alice的私钥被盗取了，她可以跑到Bob那里，同时在小偷可以获取超过1个单位的基金份额之前，将基金移到另外一个合约。如果Alice丢失了私钥，那么Bob会最终能够恢复她的基金。如果Bob变邪恶的话，Alice可以以比Bob快20倍的速度提取她拥有的基金。简言之，传统银行托管的安全性，都完全没有信任。

* 点对点博弈：任何类型的点对点博弈协议都能基于以太坊的之上来实现。一个非常基础的协议会简单成为一个差异合约，基于像区块哈希值一类的随机数据。

* 创造你自己的货币：使用以太坊内部内存存储，你可以在以太坊中创建一个完全新的货币。这些新的协议可以被创建成为可以互相交互的，以及拥有一个区中心换的交易中心，或者任何其他种类的新特性。

这是以太坊代码的优势：因为脚本语言是被设计成没有限制的，除了针对收费系统，特别是任何种类的规则都可以被编码进去。某人甚至可以拥有一个完成的公司来在区块上管理储蓄，用一个合约声明。比如，当前公司股份持有人中的六十人是需要同意后，才能移动任何基金（同时或许三十人可以每天移动最大一个单位的基金）。其他的，不那么传统的资本结果也是可能的，一个想法就是对于一个民主的组织，拥有唯一的规则就是，只有在一个组中已经存在的成员，有三分之二同意，才能够邀请另一个成员。

超越金融
金融应用，也仅挠到了以太坊和基于其之上的密码协议的可以做的事情的表面。当以太坊的金融应用或许能够成为最开始激发再加密货币社区中的许多人，对于以太坊能够和其他非金融的点对点协议一起工作的方式上的长期的承诺是有争议的。目前非金融点对点协议的所面对的主要问题之一是：缺乏激励，也就是说，不像中心化的，为了利润的平台那样，这里是没有金融原因才促进参与的。在一些例子中，参与度在一定程度上也是它拥有的奖励和荣誉。也就是这个原因，所以人们才继续写开源软件，给Wikipedia贡献，以及在论坛写评论，写博客文章。但是，在点对点协议的上下文中，在任何有意义的意识中，参与经常不是一个“有趣的”活动。它包含了投入大量资源，让一个守护程序在后台运行（潜在地独占CPU和电能），同时忘了它。

比如，这里已经有一个长时间的数据协议，比如Freenet，一个特别提供给每个人去中心化的不可审查的静态内容托管。但是实际上，Freenet相当慢，同时几乎没有人贡献资源。文件共享协议都遇到了同样的问题：尽管利他主义足够好来传播受欢迎的商业一鸣惊人的事物，它显著成为了不那么有效率的，对于这些不那么主流的偏好。因此，事与愿违地，文件共享的点对点自然特性可能实际上帮助了娱乐和媒体产品的中心化，而不是阻碍。但是，所有的这些问题可以潜在的被解决，如果我们添加了激励——赋能人们去构建不只是非盈利的副项目，同时也能够让商业和其周边的生计参与到网络中。

去中心化的数据存储：本质上，是一个去中心化的Dropbox。这个想法是这样工作的：如果一个用户想要通过网络备份1GB的文件，他们会由这些数据构建一个被称为默克尔树的数据结构。接着在树的根节点上放置10以太，并放到一个合约里面，同时上传文件到另一个特殊的网络中，那些节点希望出租他们的硬盘驱动空间来监听消息。每天，合约会自动挑选树的随机分支（比如：左->右->左->左->左->右->左，并在文件的一个块黑素，同时给0.01以太到提供分支的节点。节点会存储完整的文件，来最大化他们获取奖励的机会。

Bitmessage和Tor：Bitmessage是一个下一代的邮件协议，是完全去中心化的和加密的，允许任何人给任何其他Bitmessage用户安全地发送消息，儿不需要依赖除了网络意外的任何第三方。但是Bitmessage有一个巨大的易用性瑕疵，不像发送信息到人类友好的电子邮箱地址，比如 “myname@email”，而是你需要发送到一个容易引起误解的三十四位字符Bitmessage地址（比如：xxx）。以太坊合约提供了一个解决方案：人们可以在一个特殊的以太坊合约上注册他们的名字，同时Bitmessage客户端可以查询以太坊区块链去获得场景背后的三十四个字符的Bitmessage地址所关联的任何名字。在线匿名网络Tor遭受了同样的问题，因此也能够从这种解决方案获益。

认同和名声系统：一旦你可以在区块链上注册你的名字，逻辑上的另一步就非常明显了：在区块链上有一个信任网。信任网是一个有效的点对点沟通基础设施的核心部分：你不只需要知道一个给定的公钥指向一个给定的人，你也想要知道首先那个人是值得信任的。即决方案就是使用一个社会网络：如果你信任A，A信任B，B信任C，接着这里就有个相当不错的几率你可以信任C，至少在一定的范围是这样。以太坊可以作为一个完全去中心化的名誉系统的数据层服务——同时最后潜在地成为一个完全去中心化的应用市场。

以上的应用中许多包含完全点对点的协议和那些已经很好处于部署中的项目。在这些例子中，我们尽可能打算和许多项目建立伙伴关系，同时在交换中资助他们，以让他们能够将他们的价值带入到以太坊生态系统中。我们想要帮助的不仅仅是加密货币社区，也包括整个点对点社区，包括文件共享、种子文件、数据存储和网格网络。我们相信这里有许多项目，特别是在非金融领域，能够给社区带来巨大的价值，但是对于那些发展没有受到精确资助的，因为他们缺乏一个机会来有效介绍一个金融组件。或许以太坊可能会成为一个终极推送几十个项目到下一个阶段。

为什么所有这些应用都可能基于以太坊之上？答案基于货币内在的编程语言。这里一个类比可能是互联网。回到1996年，网页除了HTML就没有其他的了，同时所有人可能可以做的就是像GeoCities一样在网站上提供静态web页面。接着开发者决定设立有一个大的需求就是在HTML中提交表单，所以HTML添加了表单特性。这就像一个网页协议的“colored coins”：尝试去解决一个特定的问题，但是是在一个虚弱的协议之上，而不用看着更大的图片。但是不久，我们提出了JavaScript，一个网页浏览器内部的编程语言。同时也是JavaScript解决了问题：因为JavaScript是一个普遍的、图灵完全的编程语言。同时不是因为JavaScript的开发者决定了他们想要人们去构建Gmail，Faceboook，以及比特币钱包，他们呢只是想要一个编程语言。我们能用编程语言做什么是取决于我们自己的想象力。那就是我们想要带到以太坊里的灵魂。以太坊不计划成为所有加密货币发明的重点，而是计划成为一切的开始。

未来发明

伴随着它主要的的图灵完全、普遍脚本语言的特点，以太坊会超过现有的加密货币有许多其他提升：
费用：以太坊合约会规范他的图灵完全功能性，避免滥用交易，比如内存独占和无限循环脚本，通过针对脚本之行的每一个可计算步骤建立交易费用机制。更多昂贵的操作，比如存储获取和加密操作，会有更高的费用，同时对于合同填充的每一个存储项都会有一个费用。为了鼓励合同在它们自己之后进行清理，如果一个合同减少了它使用的存储的数量，会被征收一个负值的费用。事实上，这里有一个特殊的“自毁”操作码来清理合同，以及发送所有的基金，以及相当可观的负值费用会回到它的创建者。

挖矿算法：这里有许多利益来让对特殊硬件有抵抗力的挖矿的加密货币允许普通用户用商品硬件来参与，而不需要任何资本投资，同时帮助避免中心化。到目前为止，主要的解药是Scrypt，一种需要大量的计算能力和内存的挖矿算法，但是Scrypt内存难度不够，所以有公司为之建立特殊设备。我们提出Dagger，一种甚至比Scrypt内存难度更高的工作量证明的原型，以及权益证明原型算法，比如Slasher就是完全用户挖矿的。但是最终，我们计划保持一个上下文，类似决定AES和SHA3的标准的上下文，我们邀请来自全世界的大学的研究组来设计最有可能的商品硬件友好的挖矿程序。

GHOST：是一个新的区块传播协议，是由Aviv Zoar 和Yonatan Sompolinsky开辟的，可以让区块链有更快的区块确认时间，理想情况下是在三至三十秒的区间，无需陷入在快速区块确认通常会带来的中心化和高度陈旧率问题。以太坊是第一个集成一个简化的单层版本的GHOST作为协议的一部分的主流货币。

计划

以太坊潜在地是一个巨大的和影响广泛的事业，以及会花费数月的时间来开发。记住那些的话，货币会在不同的阶段发布。第一阶段，是白皮书的发布，已经发生了。论坛，一个wiki，以及一个博客已经建立了，任何人都可以免费访问，以及建立一个账户，并且在论坛中评论。在1月25日，一个六十天的募款活动回在迈阿密的会议上发起，任何人都能够为了BTC购买以太，也就是以太坊的内部货币，很像Mastercoin的募款活动，价格是1000单位的ETH比1单位的BTC，进款早期投资者会获得大约两倍的利益来补偿他们在项目更早期参与时所承担的增加的风险。募款活动参与者不仅可以获得ether，这里还有许多附加的奖励。可能包括免费额会议门票，一个斑点来放置三十二比特信息到原始区块中，以及对于顶级捐赠者来说，甚至拥有命名货币的三个子单元的能力（比如，在BTC中”microbitcoin“的等值）。

以太坊的发行不会是任何单一的机制，相反的，是一种折中的方法来组合会被用到的不同方法的优点。发行模型就像以下一般工作：
以太坊会在一个募款活动中以每BTC1000到2000ETH的价格来发布，更早的资助者会获得一个更好的价格来弥补在一个更早阶段参与进来所增加的不确定性。最少的资助金额会是0.0.1个BTC。假设x个ETH以这种方式发布：

* 0.225x的ETH会被分配给信托成员以及在募款活动之前潜在参与到项目中的早期贡献者。这个份额会被存储到一个时间锁合约中，大约40%会在一年后可以使用，70%在两年后，以及在三年后100%可以使用。
* 0.05x的ETH会被分配给一个基金，用于支付在募款活动开始到货币发行期间的费用和奖励。
* 0.225x的ETH会被分配座位一个长期储备池来支付花费，工资，以及在货币发行之后的奖励。
* 0.4x的ETH会永远每年在在那个点后被挖掘。
相对于比特币，以及大多数其他加密货币来说这里有一个重要的区别：在这里，最终的供应是无限的。“永久的线性通胀”模型是被设计来让ether既不通胀，也不通缩。供应量的不足将会抑制存在货币的一些投机的和财富不均定效应，但是在同时，线性而不是传统的指数型，通胀模型会意味着随着时间推移，通胀率趋近零。另外，因为初始的货币供应不会从零开始，所以货币供应增长再最初的八年中会实际上慢于比特币，从而给募资参与者和早起采用者一个机会再中期潜在获取收益。

在二月的某个时间点,我们会发布一个中心化的测试网络——一个人和人可以使用来发送交易和创建合约的服务器。在那不就之后，去中心化的测试网络会到来，我们可以用来测试不同的挖矿算法，以及确认点对点的守护程序是工作的和安全的。